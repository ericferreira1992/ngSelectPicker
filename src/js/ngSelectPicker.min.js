/*!
 * ngSelectPicker v1.0.0
 * Copyright 2016 Eric Ferreira
 * Contato: ericferreira1992@gmail.com
 */

!function(){"use strict";angular.module("ngSelectPicker",[],function(){}),angular.module("ngSelectPicker").directive("selectpicker",function(a,b,c){return{restrict:"EA",template:'<div class="selectpicker"><div class="selectpicker-input" ng-click="toggleCombo()"><div ng-if="todosChecked">Todos</div><div ng-if="!todosChecked">{{checados|joinSelectPicker}}</div><div><i class="fa fa-caret-down"></i></div></div><div class="selectpicker-combo" ng-class="{\'selectpicker-combo-in\': showCombo == 1, \'selectpicker-combo-out\': showCombo == 0}"><div class="selectpicker-combo-search" ng-style="!filtro && {\'display\': \'none\'}"><input type="text" class="form-control" ng-model="filtroInput" /></div><div class="selectpicker-combo-itens"><div class="selectpicker-combo-item" ng-click="toggleTodos()"><div><strong>Todos</strong></div><div><i class="fa" ng-class="{\'fa-check\': todosChecked}"></i></div></div><div ng-transclude></div></div></div></div>',transclude:!0,require:"^ngModel",scope:{ngModel:"="},link:function(a,d,e){angular.element(document).bind("click",function(b){d.find(b.target).length>0||a.$apply(function(){a.showCombo=0})}),angular.element(document).bind("keyup",function(b){27==b.keyCode&&1==a.showCombo&&a.$apply(function(){a.showCombo=0})}),a.inicializa=function(){a.checados=[],a.itens=[],a.filtroInput="",a.todosChecked=!1,a.showCombo=-1,b(function(){var b=d[0].children[0].children[1].children[1].children[1],e=b.children;angular.forEach(e,function(b){var c=angular.element(b)[0];a.itens.push({valor:c.getAttribute("value"),texto:c.innerHTML})}),angular.element(b)[0].remove(),b=d[0].children[0].children[1].children[1];var f=angular.element('<div ng-repeat="i in itens | filter: filtroInput" class="selectpicker-combo-item" ng-class="{\'disabled\': todosChecked}" ng-click="toggleCheck(i)"><div>{{i.texto}}</div><div><i class="fa" ng-class="{\'fa-check\': todosChecked || verificaSeCheckado(i.valor)}"></i></div></div>');angular.element(b).append(f),c(f)(a)},1),void 0==e.filtro||"true"==e.filtro?a.filtro=!0:a.filtro=!1,a.$watch("ngModel",function(b){a.checados=void 0!=b?b:[]},!0)},a.toggleCombo=function(){a.showCombo=a.showCombo<=0?1:0},a.verificaSeCheckado=function(b){for(var c=0;c<a.checados.length;c++)if(a.checados[c].valor==b)return!0;return!1},a.toggleCheck=function(b){if(!a.todosChecked)if(a.verificaSeCheckado(b.valor)){var c=[];a.checados.forEach(function(a){a.valor!=b.valor&&c.push(a)}),a.checados=c}else a.checados.push(b)},a.toggleTodos=function(){a.todosChecked=!a.todosChecked,a.todosChecked?a.checados=a.itens:a.checados=[]},a.inicializa()}}}).filter("joinSelectPicker",function(){return function(a){for(var b="",c=0;c<a.length;c++)b+=(""==b?"":", ")+a[c].texto;return b}})}();